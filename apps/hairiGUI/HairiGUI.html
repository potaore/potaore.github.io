<html>
 <head>
  <title>hairiGUI</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=IE9 -> IE9" >
  <link rel="stylesheet" href="style.css" type="text/css">
  <script type="text/javascript" src="jquery-1.8.2.js"></script>
  <style type="text/css">
  .main tr
  {
    height :60px;
  }
  .main td
  {
    background-color: #777777;
    width :30px;
  }
  .hai
  {
    position: fixed;
  }
  </style>

<script type="text/javascript">
    
    <!--
    var hai=[]
    var count = 0;
    var types = ['man1', 'man2', 'man3', 'man4', 'man5','man5red', 'man6', 'man7', 'man8', 'man9',  'pin1', 'pin2', 'pin3', 'pin4', 'pin5','pin5red', 'pin6', 'pin7', 'pin8', 'pin9',  'bird', 'sou2', 'sou3', 'sou4', 'sou5','sou5red', 'sou6', 'sou7', 'sou8', 'sou9',  'ton', 'nan', 'sha', 'pei', 'haku', 'hatsu', 'chun' ];
    var convertStr = ['1', '2', '3', '4', '5','0', '6', '7', '8', '9',  '1', '2', '3', '4', '5','0', '6', '7', '8', '9', '1', '2', '3', '4', '5','0', '6', '7', '8', '9',  '1', '2', '3', '4', '5', '6', '7' ];

    var typeStr = ['m', 'p', 's', 'z'];

    function set(type){
      if(count >= 14){
        return;
      }

      hai[count] = type;
      sort(hai);
      count++;
      setImg();
    }

    function removeImg(index){
      hai[index] = 999
      sort(hai);
      count--;
      setImg();
    }

    function getCurrentCell(){
      return $('#hai'+('00' + count).slice(-2))[0];
    }

    function sort(ary){
      var i, j, tmp;
      for(i = 0 ; i < ary.length; i++){
        for(j = 0; j < ary.length - 1 - i; j++){
          if(ary[j] > ary[j+1]){
            tmp = ary[j];
            ary[j] = ary[j+1];
            ary[j+1] = tmp;
          }
        }
      }
      console.log(ary);
    }

    function setImg(){
      var i, countCash;
       $('.tmp').remove();
      countCash = count;
      count = 0;
      for (var i = 0; i < countCash; i++){
        count++;
        getCurrentCell().innerHTML = getIMGSorce(count- 1);
      }

      $('#textBox')[0].value = getStr();
    }

    function getStr(){
      if(count <= 0){
        return '';
      }

      var index, type;
      var currentType = 0; //0 man, 1 pin, 2 sou, 3 zi
      var result = '';

      for(index = 0; index < count; index++){
        type = hai[index];
        if(0 <= type && type <= 9){
          if(currentType != 0 && result.length != 0){
            result += typeStr[currentType];
          }
          currentType = 0;
        } else if(10 <= type && type <= 19){
          if(currentType != 1 && result.length != 0){
            result += typeStr[currentType];
          }
          currentType = 1;
        } else if(20 <= type && type <= 29){
          if(currentType != 2 && result.length != 0){
            result += typeStr[currentType];
          }
          currentType = 2;
        } else {
          if(currentType != 3 && result.length != 0){
            result += typeStr[currentType];
          }
          currentType = 3;
        }
        result += convertStr[type];
      }
      result += typeStr[currentType];
      return result;
    }

    function getIMGSorce(index){
      return '<IMG SRC="tile/'
      + types[hai[index]]
      +'.gif" onclick="removeImg('
      + index
      + '); remove();"'
      +' class="tmp"/>';
    }
    // -->
</script>

 </head>

 <body>
 <h1 id="gametitle">hairiGUI</h1>
  <table class="main" border="1">
    <tr>
      <td id="hai01"></td>
      <td id="hai02"></td>
      <td id="hai03"></td>
      <td id="hai04"></td>
      <td id="hai05"></td>
      <td id="hai06"></td>
      <td id="hai07"></td>
      <td id="hai08"></td>
      <td id="hai09"></td>
      <td id="hai10"></td>
      <td id="hai11"></td>
      <td id="hai12"></td>
      <td id="hai13"></td>
      <td id="hai14"></td>
    </tr>
  </table>
  <br>
  <input type='text' id='textBox' style="width:200px"/>
  <br>
  <br>
  <IMG SRC="tile/man1.gif" onclick="set(0)"/>
  <IMG SRC="tile/man2.gif" onclick="set(1)"/>
  <IMG SRC="tile/man3.gif" onclick="set(2)"/>
  <IMG SRC="tile/man4.gif" onclick="set(3)"/>
  <IMG SRC="tile/man5.gif" onclick="set(4)"/>
  <IMG SRC="tile/man6.gif" onclick="set(6)"/>
  <IMG SRC="tile/man7.gif" onclick="set(7)"/>
  <IMG SRC="tile/man8.gif" onclick="set(8)"/>
  <IMG SRC="tile/man9.gif" onclick="set(9)"/>
  <IMG SRC="tile/man5red.gif" onclick="set(5)"/>
  <br>

  <IMG SRC="tile/pin1.gif" onclick="set(10)"/>
  <IMG SRC="tile/pin2.gif" onclick="set(11)"/>
  <IMG SRC="tile/pin3.gif" onclick="set(12)"/>
  <IMG SRC="tile/pin4.gif" onclick="set(13)"/>
  <IMG SRC="tile/pin5.gif" onclick="set(14)"/>
  <IMG SRC="tile/pin6.gif" onclick="set(16)"/>
  <IMG SRC="tile/pin7.gif" onclick="set(17)"/>
  <IMG SRC="tile/pin8.gif" onclick="set(18)"/>
  <IMG SRC="tile/pin9.gif" onclick="set(19)"/>
  <IMG SRC="tile/pin5red.gif" onclick="set(15)"/>
  <br>

  <IMG SRC="tile/bird.gif" onclick="set(20)"/>
  <IMG SRC="tile/sou2.gif" onclick="set(21)"/>
  <IMG SRC="tile/sou3.gif" onclick="set(22)"/>
  <IMG SRC="tile/sou4.gif" onclick="set(23)"/>
  <IMG SRC="tile/sou5.gif" onclick="set(24)"/>
  <IMG SRC="tile/sou6.gif" onclick="set(26)"/>
  <IMG SRC="tile/sou7.gif" onclick="set(27)"/>
  <IMG SRC="tile/sou8.gif" onclick="set(28)"/>
  <IMG SRC="tile/sou9.gif" onclick="set(29)"/>
  <IMG SRC="tile/sou5red.gif" onclick="set(25)"/>
  <br>

  <IMG SRC="tile/ton.gif" onclick="set(30)"/>
  <IMG SRC="tile/nan.gif" onclick="set(31)"/>
  <IMG SRC="tile/sha.gif" onclick="set(32)"/>
  <IMG SRC="tile/pei.gif" onclick="set(33)"/>
  <IMG SRC="tile/haku.gif" onclick="set(34)"/>
  <IMG SRC="tile/hatsu.gif" onclick="set(35)"/>
  <IMG SRC="tile/chun.gif" onclick="set(36)"/>
 </body>
</html>

